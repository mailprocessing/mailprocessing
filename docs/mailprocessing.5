.\" Automatically generated by Pandoc 2.5
.\"
.TH "MAILPROCESSING" "1" "" "User Commands" "User Commands"
.hy
.SH NAME
.PP
\[ti]/.mailprocessing/{imap,maildir}.rc \- mailprocessing filter
configuration
.SH SYNOPSIS
.IP
.nf
\f[C]
processor.maildir_base = \[aq]/home/user/Maildir\[aq]
for mail in processor:
  pass
\f[R]
.fi
.SH DESCRIPTION
.PP
maildirproc\[aq]s and imapproc\[aq]s configuration, the \f[I]rc
file\f[R], is not a set of declarative rules.
Instead, it is a simple Python program that has access to a \[dq]maildir
processor\[dq] object which produces mail objects.
The mail processing logic is defined in terms of if/elif/else statements
and actions are performed by calling methods on the mail objects.
.PP
Maildir and IMAP specific functionality is implemented by the
MaildirProcessor and ImapProcessor classes, respecitively.
.SS The MailProcessor class
.PP
Iteration over a MailProcessor instance yields Mail instances.
imapproc and maildirproc will create a MailProcessor instance for you
which is available as the global \f[B]processor\f[R] variable in the rc
file\[aq]s name space.
.SS Readable and writable properties
.TP
.B auto_reload_rcfile
Whether the rc file should be automatically reloaded when it has been
modified.
Assignment to this property overrides the corresponding command\-line
option.
.TP
.B maildir_base
The base directory of maildirs.
Assignment to this property overrides the corresponding command\-line
option.
This property is specific to MaildirProcessor instances.
.TP
.B maildirs
A list of maildirs (subdirectories of the maildir base directory).
Assignment to this property overrides the corresponding command\-line
option.
This property is specific to MaildirProcessor instances.
.TP
.B folders
A list of IMAP folders.
Assignment to this property overrides the corresponding command\-line
option.
This property is specific to ImapProcessor instances.
.SS Methods
.TP
.B create_folder(\f[I]folder\f[R], \f[I]parents=True\f[R], \f[I]prefix=\[aq].\[aq]\f[R])
Create folder \f[I]folder\f[R] (a string, or a list of namespace
components).
This method can safely be called for existing folders.
If the folder exists already, the method will log that it exists and
exit without trying to create it.
For MaildirProcessor \f[I]folder\f[R] does not need to be on the same
file system as the mail.
If the \f[I]folder\f[R] path is relative, it will be considered relative
to the maildir base directory.
The boolean keyword argument \f[I]parents\f[R] governs whether parent
folders should be created as well, e.g.
if you create \[aq]github.jrosdahl.maildirproc\[aq], \[aq]github\[aq]
and \[aq]github.jrosdahl\[aq] will be created as well.
This is the default behaviour.
The \f[I]prefix\f[R] keyword argument specifies a prefix to prepend the
folder name with.
This defaults to the processors \f[I]prefix\f[R] attribute which is set
via the \-\-prefix command line attribute for MaildirProcessor
instances.
.SS Writable properties
.TP
.B logfile
Location of the log file.
Assignment to this property overrides the corresponding command\-line
option.
.SS The Mail class
.PP
Indexing a \f[C]Mail\f[R] instance with a header name (a string) returns
a \f[C]Header\f[R] instance.
Example:
.IP
.nf
\f[C]
for mail in processor:
  myheader = mail[\[aq]From\[aq]]
\f[R]
.fi
.SS Readable properties
.TP
.B folder
The IMAP folder in which the mail is situated.
Only applicable for ImapProcessor.
.TP
.B maildir
The maildir in which the mail is situated.
Only applicable for MaildirProcessor.
.TP
.B path
Full filesystem path to the mail.
Only applicable for MaildirProcessor.
.TP
.B target
A Target instance.
.SS Methods
.TP
.B copy(\f[I]maildir\f[R], \f[I]create=False\f[R])
Copy the mail to \f[I]maildir\f[R] (a string).
\f[I]maildir\f[R] does not need to be on the same file system as the
mail.
If the \f[I]maildir\f[R] path is relative, it will be considered
relative to the maildir base directory.
If the optional \f[I]create\f[R] keyword argument is set to True, the
folder (and its parent folders) will be created if it does not exist.
By default non\-existent folders are not created.
.TP
.B delete()
Delete the mail.
.TP
.B forward(\f[I]addresses[, env_sender]\f[R])
Forward the mail to one or several e\-mail addresses \f[B]and delete the
mail\f[R].
\f[I]addresses\f[R] can be either a string or a list of strings.
\f[I]env_sender\f[R] (optional) specifies which envelope sender address
to use.
.TP
.B forward_copy(\f[I]addresses[, env_sender]\f[R])
Forward a copy of the mail to one or several e\-mail addresses.
\f[I]addresses\f[R] can be either a string or a list of strings.
\f[I]env_sender\f[R] (optional) specifies which envelope sender address
to use.
.TP
.B from_mailing_list(\f[I]list\f[R])
Check whether the mail originated from the mailing list \f[I]list\f[R]
(a string).
Currently, the headers Delivered\-To, Mailing\-List, X\-BeenThere and
X\-Mailing\-List are checked.
Returns a boolean.
.TP
.B strict_mailing_list(\f[I]list\f[R])
Check whether the mail originated from the mailing list \f[I]list\f[R]
(a string).
It is a bit stricter than \f[C]from_mailing_list()\f[R] and only matches
the content of typical mailing list headers, namely List\-Archive,
List\-Help, List\-ID, List\-Post, List\-Subscribe and X\-Mailing\-List.
.TP
.B is_seen()
Returns True if the message has been seen by the user, False otherwise.
.TP
.B is_flagged()
Returns True if the message has been flagged by the user, False
otherwise.
.TP
.B move(\f[I]maildir\f[R], \f[I]create=False\f[R])
Move the mail to \f[I]maildir\f[R] (a string).
\f[I]maildir\f[R] \f[B]must\f[R] be on the same file system as the mail,
otherwise nothing will happen and an error will be logged.
For MaildirProcessor, a relative \f[I]maildir\f[R] path, will be
considered relative to the maildir base directory.
If the optional \f[I]create\f[R] keyword argument is set to True, the
folder (and its parent folders) will be created if it does not exist.
By default non\-existent folders are not created.
.SS The Header class
.SS Methods
.TP
.B contains(\f[I]case\-insensitive\-string\f[R])
Check whether \f[I]case\-insensitive\-string\f[R] is part of the header.
Returns a boolean.
.TP
.B matches(\f[I]case\-insensitive\-regexp\f[R])
Check whether \f[I]case\-insensitive\-regexp\f[R] (with an implicit .*
prefix) matches the header.
Returns a boolean.
.SS The Target class
.SS Methods
.TP
.B contains(\f[I]case\-insensitive\-string\f[R])
Check whether \f[I]case\-insensitive\-string\f[R] is part of the To or
Cc header.
Returns a boolean.
.TP
.B matches(\f[I]case\-insensitive\-regexp\f[R])
Check whether \f[I]case\-insensitive\-regexp\f[R] (with an implicit .*
prefix) matches the To or Cc header.
Returns a boolean.
.SH EXAMPLES
.PP
For some examples, see the examples directory.
.SH SEE ALSO
.PP
imapproc(1), maildirproc(1)
